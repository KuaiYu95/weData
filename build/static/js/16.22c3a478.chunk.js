(window.webpackJsonpsite=window.webpackJsonpsite||[]).push([[16],{204:function(e,t,a){"use strict";var n=a(213),r=a.n(n);function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("GET"===t){var n="";return Object.keys(a).forEach((function(e){n+=e+"="+a[e]+"&"})),n&&(e=e+"?"+(n=n.substring(0,n.length-1))),r.a.get(e)}if("POST"===t)return r.a.post(e,a)}a.d(t,"k",(function(){return c})),a.d(t,"i",(function(){return o})),a.d(t,"c",(function(){return l})),a.d(t,"j",(function(){return s})),a.d(t,"d",(function(){return u})),a.d(t,"m",(function(){return m})),a.d(t,"f",(function(){return d})),a.d(t,"h",(function(){return p})),a.d(t,"b",(function(){return f})),a.d(t,"g",(function(){return g})),a.d(t,"a",(function(){return E})),a.d(t,"l",(function(){return h})),a.d(t,"e",(function(){return v}));var c=function(e){return i("/get-total","GET")},o=function(e){return i("/get-timeline","GET")},l=function(e){return i("/add-timeline","POST",e)},s=function(e){return i("/get-todos","GET")},u=function(e){return i("/add-todos","POST",e)},m=function(e){return i("/modify-todos","POST",e)},d=function(e){return i("/del-todos","POST",e)},p=function(e){return i("/get-foot-print","GET")},f=function(e){return i("/add-foot-print","POST",e)},g=function(e){return i("/get-diary","GET")},E=function(e){return i("/add-diary","POST",e)},h=function(e){return i("/get-url","GET")},v=function(e){return i("/add-url","POST",e)}},443:function(e,t,a){},457:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return b}));a(121);var n=a(91),r=(a(216),a(219)),i=(a(122),a(17)),c=(a(221),a(227)),o=a(218),l=a(209),s=a(38),u=a(39),m=a(43),d=a(40),p=a(44),f=(a(206),a(208)),g=a(0),E=a.n(g),h=a(430),v=a(204),y=(a(443),f.a.TextArea),b=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={longitude:"120.060141",latitude:"30.285995",zoom:0,location:"\u897f\u6eaa\u82b1\u56ed \xb7 \u82a6\u96ea\u82d1",title:"\u6211\u4eec\u7684\u5bb6",time:(new Date).toLocaleDateString().split("/").join("-"),addMap:!1,isCollect:!0,center:{longitude:120.059063,latitude:30.285201},useCluster:!1,markers:[]},a.events={created:function(e){a.setState({zoom:e.getZoom()})},click:function(e){a.setState({latitude:e.lnglat.lat,longitude:e.lnglat.lng,isCollect:!1})}},a.markerEvents={click:function(e,t){var n=t.getExtData(),r=n.location,i=n.position,c=n.time,o=n.title;a.setState({latitude:i.latitude,longitude:i.longitude,location:r,title:o,time:c?new Date(c).toLocaleDateString().split("/").join("-"):(new Date).toLocaleDateString().split("/").join("-"),isCollect:!0,addMap:!1})}},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(v.h)({}).then((function(t){var a=t.data,n=a.success,r=a.data,i=e.state.markers;r=r.map((function(e){var t=E.a.createElement("img",{style:{width:32,height:32},src:"https://front-images.oss-cn-hangzhou.aliyuncs.com/i4/a8d30d2a06eeb0d7bb43b0f8275c43ae-48-48.png",alt:""});return Object(l.a)({},e,{myLabel:t})})),n&&e.setState({markers:i.concat(r)})}))}},{key:"addFootPrint",value:function(){var e=this,t=this.state,a=t.longitude,n=t.latitude,r=t.location,i=t.title,s=t.markers,u=(new Date).getTime(),m={longitude:a,latitude:n},d=E.a.createElement("img",{style:{width:32,height:32},src:"https://front-images.oss-cn-hangzhou.aliyuncs.com/i4/a8d30d2a06eeb0d7bb43b0f8275c43ae-48-48.png",alt:""}),p={position:m,location:r,title:i,time:u};a&&n&&r&&i?Object(v.b)(p).then((function(t){var r=t.data.success;r&&e.setState({addMap:!1,markers:[].concat(Object(o.a)(s),[Object(l.a)({},p,{myLabel:d})]),center:{longitude:a,latitude:n},isCollect:!0}),e.openNotification(r)})):c.a.error({message:"\u64cd\u4f5c\u63d0\u793a",description:"\u6dfb\u52a0\u5931\u8d25\uff0c\u6709\u672a\u586b\u5199\u5b57\u6bb5",duration:2})}},{key:"openNotification",value:function(e){e?c.a.success({message:"\u64cd\u4f5c\u63d0\u793a",description:"\u6dfb\u52a0\u6210\u529f\uff0c\u7559\u4e0b \ud83d\udc63 \u4e00\u4e32\u4e32",duration:2}):c.a.error({message:"\u64cd\u4f5c\u63d0\u793a",description:"\u6dfb\u52a0\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc",duration:2})}},{key:"renderMarkerLayout",value:function(e){return E.a.createElement("div",null,e.myLabel)}},{key:"addMap",value:function(){this.setState({addMap:!0,title:"",location:""})}},{key:"save",value:function(e,t){"location"===t&&this.setState({location:e.target.value}),"title"===t&&this.setState({title:e.target.value})}},{key:"render",value:function(){var e=this,t=this.state,a=t.longitude,c=t.latitude,o=t.location,l=t.isCollect,s=t.addMap,u=t.title;return E.a.createElement(E.a.Fragment,null,E.a.createElement("div",{className:"map",style:{width:s?"calc(100% - 266px)":"100%"}},E.a.createElement(h.Map,{amapkey:"ec5816ac0b3be06896d10712b1c815c2",plugins:["Scale",{name:"ToolBar"}],center:this.state.center,zoom:15,events:this.events},E.a.createElement(h.Markers,{markers:this.state.markers,useCluster:this.state.useCluster,render:this.renderMarkerLayout,events:this.markerEvents}),E.a.createElement("div",{style:{position:"absolute",top:"10px",left:"10px",width:200,padding:"15px",fontSize:12}},l&&E.a.createElement(E.a.Fragment,null,E.a.createElement(r.a,{className:"tag",color:"#000"},E.a.createElement(i.a,{type:"compass"})," \u7ecf\u5ea6: ",a),E.a.createElement(r.a,{className:"tag",color:"#000"},E.a.createElement(i.a,{type:"compass",rotate:90})," \u7eac\u5ea6: ",c),E.a.createElement(r.a,{className:"tag",color:"#000"},E.a.createElement(i.a,{type:"search"})," \u65f6\u95f4: ",(new Date).toLocaleDateString()),E.a.createElement(r.a,{className:"tag",color:"#000"},E.a.createElement(i.a,{type:"environment"})," \u5730\u70b9: ",o),E.a.createElement(r.a,{className:"tag wrap",color:"#000"},E.a.createElement(i.a,{type:"menu"})," \u63cf\u8ff0: ",u)),!l&&E.a.createElement(E.a.Fragment,null,E.a.createElement(r.a,{className:"tag",color:"#000"},E.a.createElement(i.a,{type:"compass"})," \u7ecf\u5ea6: ",a),E.a.createElement(r.a,{className:"tag",color:"#000"},E.a.createElement(i.a,{type:"compass",rotate:90})," \u7eac\u5ea6: ",c),E.a.createElement(r.a,{className:"tag",color:"#888E9D",onClick:this.addMap.bind(this)},E.a.createElement(i.a,{type:"plus-circle"})," \u672a\u6536\u85cf\uff0c\u53bb\u6dfb\u52a0\u6536\u85cf"))))),s&&E.a.createElement("div",{className:"side"},E.a.createElement("div",{className:"row-input"},E.a.createElement(i.a,{className:"icon",type:"compass"}),E.a.createElement(f.a,{className:"input",type:"text",value:a,onChange:function(t){return e.save(t,"longitude")}})),E.a.createElement("div",{className:"row-input"},E.a.createElement(i.a,{className:"icon",type:"compass",rotate:90}),E.a.createElement(f.a,{className:"input",type:"text",value:c,onChange:function(t){return e.save(t,"latitude")}})),E.a.createElement("div",{className:"row-input"},E.a.createElement(i.a,{className:"icon",type:"search"}),E.a.createElement(f.a,{className:"input",type:"text",value:(new Date).toLocaleDateString(),onChange:function(t){return e.save(t,"time")}})),E.a.createElement("div",{className:"row-input"},E.a.createElement(i.a,{className:"icon",type:"environment"}),E.a.createElement(f.a,{className:"input",type:"text",placeholder:"\u8bf7\u8f93\u5165\u5730\u5740",onChange:function(t){return e.save(t,"location")}})),E.a.createElement("div",{className:"row-input"},E.a.createElement(i.a,{className:"icon",type:"menu"}),E.a.createElement(y,{allowclear:"true",autosize:{minRows:3,maxRows:5},placeholder:"\u8bf7\u8f93\u5165\u6807\u9898",onChange:function(t){return e.save(t,"title")}})),E.a.createElement("div",{className:"form-submit"},E.a.createElement(n.a,{block:!0,type:"primary",onClick:this.addFootPrint.bind(this)},"\u6dfb\u52a0"))))}}]),t}(g.Component)}}]);
//# sourceMappingURL=16.22c3a478.chunk.js.map