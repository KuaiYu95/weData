{"version":3,"sources":["api/ajax.tsx","api/index.tsx","components/CodeBlock/index.tsx","components/MdEditor/index.tsx","containers/Blog/index.tsx"],"names":["ajax","url","type","data","urlStr","Object","keys","forEach","key","substring","length","axios","get","post","confirm","localStorage","getItem","err","getTotal","getTodos","addTodos","message","error","modifyTodos","delTodos","getFootPrint","addFootPrint","getDiary","addDiary","getUrl","addUrl","getBlog","addBlog","getBlogDetail","CodeBlock","value","this","props","language","style","tomorrowNightEighties","React","PureComponent","create","mdParser","MarkdownIt","renderHTML","text","render","onChange","e","html","getValue","handleEditorChange","Option","Search","Blog","state","blogList","totalItems","currentPage","pageSize","searchSort","searchType","searchValue","title","typeIds","isWrite","isView","getData","then","res","success","setState","page","console","log","onSearch","handleSelect","handleSelectSort","handleSearchSort","handleTitle","target","getFile","event","files","file","reader","FileReader","test","onload","name","split","result","readAsText","handleViewBlog","_id","onSubmit","uploadTime","Date","getTime","lastModifyTime","trim","warning","commentCount","likeCount","collectCount","viewCount","notification","description","duration","className","padding","overflow","margin","source","escapeHtml","renderers","code","width","onClick","placeholder","allowClear","defaultValue","blogType","map","it","mode","minWidth","maxTagCount","maxTagTextLength","htmlFor","display","id","item","isUploadTime","time","moment","format","index","color","marginTop","MdEditor","showQuickJumper","defaultCurrent","total","showTotal","hideOnSinglePage","textAlign","Component"],"mappings":"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","file":"static/js/11.3a851072.chunk.js","sourcesContent":["import axios from 'axios'\r\n\r\nexport default function ajax(url:string = '', type:string = 'GET', data:any = {}):any {\r\n  \r\n  if (type === 'GET') {\r\n    let urlStr = ''\r\n    Object.keys(data).forEach((key) => {\r\n      urlStr += key + '=' + data[key] + '&'\r\n    })\r\n    if(urlStr) {\r\n      urlStr = urlStr.substring(0, urlStr.length - 1)\r\n      url = url + '?' + urlStr\r\n    }\r\n    return axios.get(url)\r\n  } else if (type === 'POST') {\r\n    return axios.post(url, data)\r\n  }\r\n}","import ajax from './ajax'\r\nimport { message } from 'antd'\r\nlet confirm = localStorage.getItem('confirm')\r\nlet err = '对不起，您没有权限'\r\n// 获取 首页数据\r\nexport const getTotal = (data: object) => ajax('/get-total', 'GET')\r\n// 获取 时间线\r\nexport const getTimeline = (data: object) => ajax('/get-timeline', 'GET')\r\n// 添加 时间线\r\nexport const addTimeline = (data: object) => {\r\n  if (confirm !== '0913') {\r\n    message.error(err)\r\n    return\r\n  }\r\n  return ajax('/add-timeline', 'POST', data)\r\n}\r\n// 获取 todos\r\nexport const getTodos = (data: object) => ajax('/get-todos', 'GET')\r\n// 添加 todo\r\nexport const addTodos = (data: object) => {\r\n  if (confirm !== '0913') {\r\n    message.error(err)\r\n    return\r\n  }\r\n  return ajax('/add-todos', 'POST', data)\r\n}\r\n// 修改 todo\r\nexport const modifyTodos = (data: object) => ajax('/modify-todos', 'POST', data)\r\n// 删除 todo\r\nexport const delTodos = (data: object) => ajax('/del-todos', 'POST', data)\r\n// 获取 足迹\r\nexport const getFootPrint = (data: object) => ajax('/get-foot-print', 'GET')\r\n// 添加 足迹\r\nexport const addFootPrint = (data: object) => {\r\n  if (confirm !== '0913') {\r\n    message.error(err)\r\n    return\r\n  }\r\n  return ajax('/add-foot-print', 'POST', data)\r\n}\r\n// 获取 日记\r\nexport const getDiary = (data: object) => ajax('/get-diary', 'GET')\r\n// 添加 日记\r\nexport const addDiary = (data: object) => {\r\n  if (confirm !== '0913') {\r\n    message.error(err)\r\n    return\r\n  }\r\n  return ajax('/add-diary', 'POST', data)\r\n}\r\n// 获取 收藏\r\nexport const getUrl = (data: object) => ajax('/get-url', 'GET')\r\n// 添加 收藏\r\nexport const addUrl = (data: object) => {\r\n  if (confirm !== '0913') {\r\n    message.error(err)\r\n    return\r\n  }\r\n  return ajax('/add-url', 'POST', data)\r\n}\r\n// 获取 收藏\r\nexport const getBlog = (data: object) => ajax('/get-blog', 'GET', data)\r\n// 添加 blog\r\nexport const addBlog = (data: object) => {\r\n  if (confirm !== '0913') {\r\n    message.error(err)\r\n    return\r\n  }\r\n  return ajax('/add-blog', 'POST', data)\r\n}\r\n// 获取 blog详情\r\nexport const getBlogDetail = (data: object) => ajax('/get-blog-detail', 'GET', data)\r\n","import React from 'react';\nimport SyntaxHighlighter from 'react-syntax-highlighter';\nimport { tomorrowNightEighties } from 'react-syntax-highlighter/dist/esm/styles/hljs';\nimport { Form } from 'antd';\ninterface IProps {\n  value: string\n}\nclass CodeBlock extends React.PureComponent<IProps> {\n  render() {\n    let { value } = this.props\n    return (\n      <SyntaxHighlighter language=\"\" style={tomorrowNightEighties}>\n        {value}\n      </SyntaxHighlighter>\n    );\n  }\n}\nexport default Form.create()(CodeBlock);","\nimport * as React from 'react'\nimport MarkdownIt from 'markdown-it'\nimport MdEditor from 'react-markdown-editor-lite'\nimport 'react-markdown-editor-lite/lib/index.css';\n\nconst mdParser = new MarkdownIt(/* Markdown-it options */);\n\nfunction handleEditorChange({ html, text }:any, props:any) {\n  props.getValue(html, text)\n}\nexport default (props:any) => {\n  return (\n    <MdEditor\n      value={props.value}\n      renderHTML={(text) => mdParser.render(text)}\n      onChange={(e) => handleEditorChange(e, props)}\n    />\n  )\n}","import React, { Component } from 'react'\nimport { Button, Icon, Tag, Divider, Pagination, Input, Select, message, notification, Empty } from 'antd'\nimport ReactMarkdown from 'react-markdown/with-html';\nimport CodeBlock from '../../components/CodeBlock/index';\nimport MdEditor from '../../components/MdEditor/index'\nimport moment from 'moment';\nimport { addBlog, getBlog, getBlogDetail } from '../../api/index';\nimport './index.less'\n\nconst { Option } = Select\nconst { Search } = Input;\nexport default class Blog extends Component {\n  state = {\n    blogList: [],\n    totalItems: 0,\n    currentPage: 1,\n    pageSize: 10,\n    searchSort: '0',\n    searchType: '',\n    searchValue: '',\n    text: '',\n    title: '',\n    html: '',\n    typeIds: [],\n    isWrite: false,\n    isView: false,\n  }\n\n  componentDidMount() {\n    this.getData()\n  }\n\n  getData = () => {\n    let { currentPage, pageSize, searchSort, searchValue, searchType } = this.state\n    getBlog({ currentPage, pageSize, searchSort, searchValue, searchType }).then((res: any) => {\n      let { success, data, totalItems } = res.data\n      if (success) {\n        this.setState({ blogList: data, totalItems })\n      } else {\n        message.error('访问接口失败，请检查网络')\n      }\n    })\n  }\n\n  isWrite = () => {\n    let { isWrite } = this.state\n    this.setState({ isWrite: !isWrite })\n  }\n\n  onChange = (page: number, pageSize?: number | undefined) => {\n    console.log(page, pageSize);\n  }\n\n  onSearch = (value: string) => {\n    this.setState({ searchValue: value }, () => {\n      this.getData()\n    })\n  }\n\n  handleSelect = (value: any) => {\n    this.setState({ typeIds: value }, () => {\n      this.getData()\n    })\n  }\n\n  handleSelectSort = (value: any) => {\n    this.setState({ searchType: value }, () => {\n      this.getData()\n    })\n  }\n\n  handleSearchSort = (value: string) => {\n    this.setState({ searchSort: value }, () => {\n      this.getData()\n    })\n  }\n\n  handleTitle = (e: any) => {\n    let { value } = e.target\n    this.setState({ title: value })\n  }\n\n  getValue = (html: string, text: string) => {\n    this.setState({ html, text })\n  }\n\n  getFile = (event: any) => {\n    if (event.target.files.length) {\n      let file = event.target.files[0];\n      let reader = new FileReader()\n      if (/text\\/markdown/.test(file.type)) {\n        reader.onload = (event: any) => {\n          this.setState({\n            title: file.name.split('.md')[0],\n            text: event.target.result\n          })\n        }\n        reader.readAsText(file);\n      } else {\n        message.error('仅支持上传 markdown 文件')\n      }\n    }\n  }\n\n  handleViewBlog = (_id: string) => {\n    getBlogDetail({ _id }).then((res: any) => {\n      let { success, data } = res.data\n      let { title, _id, html, text } = data\n      if (success) {\n        this.setState({ title, _id, html, text, isView: true })\n      } else {\n        message.error('访问接口失败，请检查网络')\n      }\n    })\n  }\n\n  onSubmit = () => {\n    let { title, text, html, typeIds } = this.state\n    let uploadTime = new Date().getTime()\n    let lastModifyTime = uploadTime\n    let commentCount = 0, likeCount = 0, collectCount = 0, viewCount = 0\n    if (title.trim() === '') {\n      message.warning('请输入标题')\n    } else if (typeIds.length === 0) {\n      message.warning('请对博客分类')\n    } else if (text.trim() === '') {\n      message.warning('请输入内容')\n    } else {\n      addBlog({ title: title.trim(), text, html, typeIds, uploadTime, lastModifyTime, commentCount, likeCount, collectCount, viewCount }).then((res: any) => {\n        let { success } = res.data\n        if (success) {\n          notification['success']({\n            message: '操作提示',\n            description: `${title}发布成功`,\n            duration: 2\n          })\n          this.setState({ title: '', text: '', typeIds: [], html: '', isWrite: false }, () => {\n            this.getData()\n          })\n        } else {\n          message.error('发布失败，请检查网络')\n        }\n      })\n    }\n  }\n\n  render() {\n    let { blogList, isWrite, text, title, typeIds, totalItems, searchSort, searchType, isView } = this.state\n    return (\n      <div className=\"blog\" style={{ padding: !isView ? 24 : 0, overflow: isView ? 'auto' : 'hidden', margin: 'auto' }}>\n        {!isView ? <>\n          <div className=\"tab-line\" style={{ width: isWrite ? '100%' : '800px', margin: !isWrite ? 'auto' : '0 0 16px' }}>\n            <Button type=\"primary\" onClick={this.isWrite}>\n              {isWrite && <Icon type=\"left\" />}\n              {isWrite ? '博客列表' : '发布博客'}\n              {!isWrite && <Icon type=\"right\" />}\n            </Button>\n            {isWrite && <Input placeholder=\"请输入标题\" value={title} onChange={this.handleTitle} allowClear />}\n            {!isWrite && <Search placeholder=\"搜索\" onSearch={this.onSearch} />}\n            {!isWrite && <Select defaultValue={searchSort} style={{ width: 400 }} onChange={this.handleSearchSort}>\n              <Option value=\"0\">最近更新 </Option>\n              <Option value=\"2\">最多点赞 </Option>\n              <Option value=\"4\">最多收藏 </Option>\n              <Option value=\"1\">最多评论 </Option>\n              <Option value=\"3\">最多查看 </Option>\n            </Select>}\n            {!isWrite && <Select defaultValue={searchType} style={{ width: 400 }} onChange={this.handleSelectSort}>\n              <Option value=\"\">全部 </Option>\n              {blogType.map((it: any) => {\n                return <Option key={it}>{it}</Option>\n              })}\n            </Select>}\n            {isWrite && <Select placeholder=\"请对博客分类\" mode=\"multiple\" style={{ minWidth: 235 }} value={typeIds} onChange={this.handleSelect} maxTagCount={2} maxTagTextLength={4}>\n              {blogType.map((it: any) => {\n                return <Option key={it}>{it}</Option>\n              })}\n            </Select>}\n            {isWrite && <label htmlFor={\"aaaa\"}>\n              <span className=\"upload\"><Icon type=\"upload\" /> 上传 Markdown 文件</span>\n              <input style={{ display: 'none' }} id=\"aaaa\" type=\"file\" onChange={this.getFile} />\n            </label>}\n            {isWrite && <Button onClick={this.onSubmit}>发布</Button>}\n          </div>\n          {!isWrite && (blogList.length > 0 ? blogList.map((item: any) => {\n            let isUploadTime = item.uploadTime === item.lastModifyTime\n            let time = moment(+item.lastModifyTime).format('YYYY-MM-DD kk:mm:ss')\n            return <div className=\"blog-contain\" style={isWrite ? {} : { margin: '16px auto 0' }} key={item._id}>\n              <div className=\"blog-header\">\n                <div className=\"blog-title\" onClick={() => this.handleViewBlog(item._id)}><Icon type=\"medium\" /> {item.title}</div>\n                <div className=\"blog-tags\">{item.typeIds.map((it: string, index: number) => {\n                  return <span className=\"blog-tags-item\" key={index}><Tag color=\"#637C8F\">{it}</Tag></span>\n                })}</div>\n              </div>\n              <div className=\"blog-content\">{item.text}</div>\n              <div className=\"blog-footer\">\n                <div className=\"blog-statistic\" onClick={() => message.warning('开发中，尽情期待吧')}>\n                  <span>\n                    <Icon type=\"like\" />\n                    <span className=\"count\">{item.likeCount}</span>\n                  </span>\n                  <Divider type=\"vertical\" />\n                  <span>\n                    <Icon type=\"star\" />\n                    <span className=\"count\">{item.collectCount}</span>\n                  </span>\n                  <Divider type=\"vertical\" />\n                  <span>\n                    <Icon type=\"message\" />\n                    <span className=\"count\">{item.commentCount}</span>\n                  </span>\n                  <Divider type=\"vertical\" />\n                  <span>\n                    <Icon type=\"eye\" />\n                    <span className=\"count\">{item.viewCount}</span>\n                  </span>\n                </div>\n                <div className=\"blog-timestamp\">\n                  <Tag color=\"#f3fcf6\" style={{ color: '#888E9D' }}>\n                    {isUploadTime ? '发布时间：' : '最后更新时间：'}<Icon type=\"clock-circle\" /> {time}\n                  </Tag>\n                </div>\n              </div>\n            </div>\n          }) : <Empty description=\"暂无数据\" style={{ color: '#fff', marginTop: '20vh' }} />)}\n          {isWrite && <div className=\"write-blog\">\n            <MdEditor getValue={this.getValue} value={text} />\n          </div>}\n          {!isWrite && <Pagination\n            showQuickJumper\n            onChange={this.onChange}\n            defaultCurrent={1}\n            total={totalItems}\n            showTotal={total => `搜索到 ${total} 条`}\n            hideOnSinglePage\n            style={{ textAlign: 'right', width: 800 }}\n          />}\n        </> : <div className=\"blog-cont\">\n            <div className=\"info\">\n              <h1>{title}</h1>\n            </div>\n            <div className=\"md\">\n              <ReactMarkdown\n                className=\"markdown-body\"\n                source={text}\n                escapeHtml={false}\n                renderers={{ code: CodeBlock }}\n              />\n            </div>\n          </div>}\n      </div>\n    )\n  }\n}\n\nconst blogType = [\n  'HTML / CSS', 'JS / TS', 'React及其周边技术栈', '各端小程序开发', '移动端 H5', 'webpack', '其他技术框架', '数据库', '数据结构与算法', '开发工具', '计算机网络', '其他'\n]"],"sourceRoot":""}