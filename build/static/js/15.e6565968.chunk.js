(window.webpackJsonpsite=window.webpackJsonpsite||[]).push([[15],{205:function(e,t,a){"use strict";var n=a(214),r=a.n(n);function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("GET"===t){var n="";return Object.keys(a).forEach((function(e){n+=e+"="+a[e]+"&"})),n&&(e=e+"?"+(n=n.substring(0,n.length-1))),r.a.get(e)}if("POST"===t)return r.a.post(e,a)}a.d(t,"k",(function(){return c})),a.d(t,"i",(function(){return i})),a.d(t,"c",(function(){return l})),a.d(t,"j",(function(){return s})),a.d(t,"d",(function(){return u})),a.d(t,"m",(function(){return m})),a.d(t,"f",(function(){return d})),a.d(t,"h",(function(){return p})),a.d(t,"b",(function(){return f})),a.d(t,"g",(function(){return g})),a.d(t,"a",(function(){return h})),a.d(t,"l",(function(){return E})),a.d(t,"e",(function(){return v}));var c=function(e){return o("/get-total","GET")},i=function(e){return o("/get-timeline","GET")},l=function(e){return o("/add-timeline","POST",e)},s=function(e){return o("/get-todos","GET")},u=function(e){return o("/add-todos","POST",e)},m=function(e){return o("/modify-todos","POST",e)},d=function(e){return o("/del-todos","POST",e)},p=function(e){return o("/get-foot-print","GET")},f=function(e){return o("/add-foot-print","POST",e)},g=function(e){return o("/get-diary","GET")},h=function(e){return o("/add-diary","POST",e)},E=function(e){return o("/get-url","GET")},v=function(e){return o("/add-url","POST",e)}},435:function(e,t,a){},449:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return w}));a(91);var n=a(51),r=(a(217),a(220)),o=(a(119),a(16)),c=(a(222),a(228)),i=a(219),l=a(207),s=a(37),u=a(38),m=a(41),d=a(39),p=a(42),f=(a(208),a(210)),g=a(1),h=a.n(g),E=a(422),v=a(205);a(435);function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(a,!0).forEach((function(t){Object(l.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var O=f.a.TextArea,w=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={longitude:"120.060141",latitude:"30.285995",zoom:0,location:"\u897f\u6eaa\u82b1\u56ed \xb7 \u82a6\u96ea\u82d1",title:"\u6211\u4eec\u7684\u5bb6",time:(new Date).toLocaleDateString().split("/").join("-"),addMap:!1,isCollect:!0,center:{longitude:120.059063,latitude:30.285201},useCluster:!1,markers:[]},a.events={created:function(e){a.setState({zoom:e.getZoom()})},click:function(e){a.setState({latitude:e.lnglat.lat,longitude:e.lnglat.lng,isCollect:!1})}},a.markerEvents={click:function(e,t){var n=t.getExtData(),r=n.location,o=n.position,c=n.time,i=n.title;a.setState({latitude:o.latitude,longitude:o.longitude,location:r,title:i,time:c?new Date(c).toLocaleDateString().split("/").join("-"):(new Date).toLocaleDateString().split("/").join("-"),isCollect:!0,addMap:!1})}},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(v.h)({}).then((function(t){var a=t.data,n=a.success,r=a.data,o=e.state.markers;r=r.map((function(e){return b({},e,{myLabel:h.a.createElement("img",{style:{width:32,height:32},src:"https://front-images.oss-cn-hangzhou.aliyuncs.com/i4/a8d30d2a06eeb0d7bb43b0f8275c43ae-48-48.png",alt:""})})})),n&&e.setState({markers:o.concat(r)})}))}},{key:"addFootPrint",value:function(){var e=this,t=this.state,a=t.longitude,n=t.latitude,r=t.location,o=t.title,l=t.markers,s=(new Date).getTime(),u={longitude:a,latitude:n},m=h.a.createElement("img",{style:{width:32,height:32},src:"https://front-images.oss-cn-hangzhou.aliyuncs.com/i4/a8d30d2a06eeb0d7bb43b0f8275c43ae-48-48.png",alt:""}),d={position:u,location:r,title:o,time:s};a&&n&&r&&o?Object(v.b)(d).then((function(t){var r=t.data.success;r&&e.setState({addMap:!1,markers:[].concat(Object(i.a)(l),[b({},d,{myLabel:m})]),center:{longitude:a,latitude:n},isCollect:!0}),e.openNotification(r)})):c.a.error({message:"\u64cd\u4f5c\u63d0\u793a",description:"\u6dfb\u52a0\u5931\u8d25\uff0c\u6709\u672a\u586b\u5199\u5b57\u6bb5",duration:2})}},{key:"openNotification",value:function(e){e?c.a.success({message:"\u64cd\u4f5c\u63d0\u793a",description:"\u6dfb\u52a0\u6210\u529f\uff0c\u7559\u4e0b \ud83d\udc63 \u4e00\u4e32\u4e32",duration:2}):c.a.error({message:"\u64cd\u4f5c\u63d0\u793a",description:"\u6dfb\u52a0\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc",duration:2})}},{key:"renderMarkerLayout",value:function(e){return h.a.createElement("div",null,e.myLabel)}},{key:"addMap",value:function(){this.setState({addMap:!0,title:"",location:""})}},{key:"save",value:function(e,t){"location"===t&&this.setState({location:e.target.value}),"title"===t&&this.setState({title:e.target.value})}},{key:"render",value:function(){var e=this,t=this.state,a=t.longitude,c=t.latitude,i=t.location,l=t.isCollect,s=t.addMap,u=t.title;return h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:"map",style:{width:s?"calc(100% - 266px)":"100%"}},h.a.createElement(E.Map,{amapkey:"ec5816ac0b3be06896d10712b1c815c2",plugins:["Scale",{name:"ToolBar"}],center:this.state.center,zoom:15,events:this.events},h.a.createElement(E.Markers,{markers:this.state.markers,useCluster:this.state.useCluster,render:this.renderMarkerLayout,events:this.markerEvents}),h.a.createElement("div",{style:{position:"absolute",top:"10px",left:"10px",width:200,padding:"15px",fontSize:12}},l&&h.a.createElement(h.a.Fragment,null,h.a.createElement(r.a,{className:"tag",color:"#000"},h.a.createElement(o.a,{type:"compass"})," \u7ecf\u5ea6: ",a),h.a.createElement(r.a,{className:"tag",color:"#000"},h.a.createElement(o.a,{type:"compass",rotate:90})," \u7eac\u5ea6: ",c),h.a.createElement(r.a,{className:"tag",color:"#000"},h.a.createElement(o.a,{type:"search"})," \u65f6\u95f4: ",(new Date).toLocaleDateString()),h.a.createElement(r.a,{className:"tag",color:"#000"},h.a.createElement(o.a,{type:"environment"})," \u5730\u70b9: ",i),h.a.createElement(r.a,{className:"tag wrap",color:"#000"},h.a.createElement(o.a,{type:"menu"})," \u63cf\u8ff0: ",u)),!l&&h.a.createElement(h.a.Fragment,null,h.a.createElement(r.a,{className:"tag",color:"#000"},h.a.createElement(o.a,{type:"compass"})," \u7ecf\u5ea6: ",a),h.a.createElement(r.a,{className:"tag",color:"#000"},h.a.createElement(o.a,{type:"compass",rotate:90})," \u7eac\u5ea6: ",c),h.a.createElement(r.a,{className:"tag",color:"#888E9D",onClick:this.addMap.bind(this)},h.a.createElement(o.a,{type:"plus-circle"})," \u672a\u6536\u85cf\uff0c\u53bb\u6dfb\u52a0\u6536\u85cf"))))),s&&h.a.createElement("div",{className:"side"},h.a.createElement("div",{className:"row-input"},h.a.createElement(o.a,{className:"icon",type:"compass"}),h.a.createElement(f.a,{className:"input",type:"text",value:a,onChange:function(t){return e.save(t,"longitude")}})),h.a.createElement("div",{className:"row-input"},h.a.createElement(o.a,{className:"icon",type:"compass",rotate:90}),h.a.createElement(f.a,{className:"input",type:"text",value:c,onChange:function(t){return e.save(t,"latitude")}})),h.a.createElement("div",{className:"row-input"},h.a.createElement(o.a,{className:"icon",type:"search"}),h.a.createElement(f.a,{className:"input",type:"text",value:(new Date).toLocaleDateString(),onChange:function(t){return e.save(t,"time")}})),h.a.createElement("div",{className:"row-input"},h.a.createElement(o.a,{className:"icon",type:"environment"}),h.a.createElement(f.a,{className:"input",type:"text",placeholder:"\u8bf7\u8f93\u5165\u5730\u5740",onChange:function(t){return e.save(t,"location")}})),h.a.createElement("div",{className:"row-input"},h.a.createElement(o.a,{className:"icon",type:"menu"}),h.a.createElement(O,{allowclear:"true",autosize:{minRows:3,maxRows:5},placeholder:"\u8bf7\u8f93\u5165\u6807\u9898",onChange:function(t){return e.save(t,"title")}})),h.a.createElement("div",{className:"form-submit"},h.a.createElement(n.a,{block:!0,type:"primary",onClick:this.addFootPrint.bind(this)},"\u6dfb\u52a0"))))}}]),t}(g.Component)}}]);
//# sourceMappingURL=15.e6565968.chunk.js.map