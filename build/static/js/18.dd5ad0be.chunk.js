(window.webpackJsonpsite=window.webpackJsonpsite||[]).push([[18],{197:function(e,t,a){"use strict";a(198);var n=a(199),r=a(210),o=a.n(r);function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("GET"===t){var n="";return Object.keys(a).forEach((function(e){n+=e+"="+a[e]+"&"})),n&&(e=e+"?"+(n=n.substring(0,n.length-1))),o.a.get(e)}if("POST"===t)return o.a.post(e,a)}a.d(t,"l",(function(){return s})),a.d(t,"k",(function(){return u})),a.d(t,"d",(function(){return m})),a.d(t,"n",(function(){return d})),a.d(t,"f",(function(){return p})),a.d(t,"j",(function(){return f})),a.d(t,"c",(function(){return g})),a.d(t,"i",(function(){return E})),a.d(t,"b",(function(){return h})),a.d(t,"m",(function(){return v})),a.d(t,"e",(function(){return y})),a.d(t,"g",(function(){return b})),a.d(t,"a",(function(){return k})),a.d(t,"h",(function(){return N}));var c=localStorage.getItem("confirm"),l="\u5bf9\u4e0d\u8d77\uff0c\u60a8\u6ca1\u6709\u6743\u9650",s=function(e){return i("/get-total","GET")},u=function(e){return i("/get-todos","GET")},m=function(e){if("0913"===c)return i("/add-todos","POST",e);n.a.error(l)},d=function(e){return i("/modify-todos","POST",e)},p=function(e){return i("/del-todos","POST",e)},f=function(e){return i("/get-foot-print","GET")},g=function(e){if("0913"===c)return i("/add-foot-print","POST",e);n.a.error(l)},E=function(e){return i("/get-diary","GET")},h=function(e){if("0913"===c)return i("/add-diary","POST",e);n.a.error(l)},v=function(e){return i("/get-url","GET")},y=function(e){if("0913"===c)return i("/add-url","POST",e);n.a.error(l)},b=function(e){return i("/get-blog","GET",e)},k=function(e){if("0913"===c)return i("/add-blog","POST",e);n.a.error(l)},N=function(e){return i("/get-blog-detail","GET",e)}},871:function(e,t,a){},882:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return b}));a(207);var n=a(206),r=(a(218),a(224)),o=(a(117),a(19)),i=(a(208),a(211)),c=a(223),l=a(214),s=a(51),u=a(52),m=a(54),d=a(53),p=a(55),f=(a(215),a(217)),g=a(0),E=a.n(g),h=a(858),v=a(197),y=(a(871),f.a.TextArea),b=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={longitude:"120.060141",latitude:"30.285995",zoom:0,location:"\u897f\u6eaa\u82b1\u56ed \xb7 \u82a6\u96ea\u82d1",title:"\u6211\u4eec\u7684\u5bb6",time:(new Date).toLocaleDateString().split("/").join("-"),addMap:!1,isCollect:!0,center:{longitude:120.059063,latitude:30.285201},useCluster:!1,markers:[]},a.events={created:function(e){a.setState({zoom:e.getZoom()})},click:function(e){a.setState({latitude:e.lnglat.lat,longitude:e.lnglat.lng,isCollect:!1})}},a.markerEvents={click:function(e,t){var n=t.getExtData(),r=n.location,o=n.position,i=n.time,c=n.title;a.setState({latitude:o.latitude,longitude:o.longitude,location:r,title:c,time:i?new Date(i).toLocaleDateString().split("/").join("-"):(new Date).toLocaleDateString().split("/").join("-"),isCollect:!0,addMap:!1})}},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(v.j)({}).then((function(t){var a=t.data,n=a.success,r=a.data,o=e.state.markers;r=r.map((function(e){var t=E.a.createElement("img",{style:{width:32,height:32},src:"https://front-images.oss-cn-hangzhou.aliyuncs.com/i4/a8d30d2a06eeb0d7bb43b0f8275c43ae-48-48.png",alt:""});return Object(l.a)({},e,{myLabel:t})})),n&&e.setState({markers:o.concat(r)})}))}},{key:"addFootPrint",value:function(){var e=this,t=this.state,a=t.longitude,n=t.latitude,r=t.location,o=t.title,s=t.markers,u=(new Date).getTime(),m={longitude:a,latitude:n},d=E.a.createElement("img",{style:{width:32,height:32},src:"https://front-images.oss-cn-hangzhou.aliyuncs.com/i4/a8d30d2a06eeb0d7bb43b0f8275c43ae-48-48.png",alt:""}),p={position:m,location:r,title:o,time:u};a&&n&&r&&o?Object(v.c)(p).then((function(t){var r=t.data.success;r&&e.setState({addMap:!1,markers:[].concat(Object(c.a)(s),[Object(l.a)({},p,{myLabel:d})]),center:{longitude:a,latitude:n},isCollect:!0}),e.openNotification(r)})):i.a.error({message:"\u64cd\u4f5c\u63d0\u793a",description:"\u6dfb\u52a0\u5931\u8d25\uff0c\u6709\u672a\u586b\u5199\u5b57\u6bb5",duration:2})}},{key:"openNotification",value:function(e){e?i.a.success({message:"\u64cd\u4f5c\u63d0\u793a",description:"\u6dfb\u52a0\u6210\u529f\uff0c\u7559\u4e0b \ud83d\udc63 \u4e00\u4e32\u4e32",duration:2}):i.a.error({message:"\u64cd\u4f5c\u63d0\u793a",description:"\u6dfb\u52a0\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc",duration:2})}},{key:"renderMarkerLayout",value:function(e){return E.a.createElement("div",null,e.myLabel)}},{key:"addMap",value:function(){this.setState({addMap:!0,title:"",location:""})}},{key:"save",value:function(e,t){"location"===t&&this.setState({location:e.target.value}),"title"===t&&this.setState({title:e.target.value})}},{key:"render",value:function(){var e=this,t=this.state,a=t.longitude,i=t.latitude,c=t.location,l=t.isCollect,s=t.addMap,u=t.title;return E.a.createElement(E.a.Fragment,null,E.a.createElement("div",{className:"map",style:{width:s?"calc(100% - 266px)":"100%"}},E.a.createElement(h.Map,{amapkey:"ec5816ac0b3be06896d10712b1c815c2",plugins:["Scale",{name:"ToolBar"}],center:this.state.center,zoom:15,events:this.events},E.a.createElement(h.Markers,{markers:this.state.markers,useCluster:this.state.useCluster,render:this.renderMarkerLayout,events:this.markerEvents}),E.a.createElement("div",{style:{position:"absolute",top:"10px",left:"10px",width:200,padding:"15px",fontSize:12}},l&&E.a.createElement(E.a.Fragment,null,E.a.createElement(r.a,{className:"tag",color:"#000"},E.a.createElement(o.a,{type:"compass"})," \u7ecf\u5ea6: ",a),E.a.createElement(r.a,{className:"tag",color:"#000"},E.a.createElement(o.a,{type:"compass",rotate:90})," \u7eac\u5ea6: ",i),E.a.createElement(r.a,{className:"tag",color:"#000"},E.a.createElement(o.a,{type:"search"})," \u65f6\u95f4: ",(new Date).toLocaleDateString()),E.a.createElement(r.a,{className:"tag",color:"#000"},E.a.createElement(o.a,{type:"environment"})," \u5730\u70b9: ",c),E.a.createElement(r.a,{className:"tag wrap",color:"#000"},E.a.createElement(o.a,{type:"menu"})," \u63cf\u8ff0: ",u)),!l&&E.a.createElement(E.a.Fragment,null,E.a.createElement(r.a,{className:"tag",color:"#000"},E.a.createElement(o.a,{type:"compass"})," \u7ecf\u5ea6: ",a),E.a.createElement(r.a,{className:"tag",color:"#000"},E.a.createElement(o.a,{type:"compass",rotate:90})," \u7eac\u5ea6: ",i),E.a.createElement(r.a,{className:"tag",color:"#888E9D",onClick:this.addMap.bind(this)},E.a.createElement(o.a,{type:"plus-circle"})," \u672a\u6536\u85cf\uff0c\u53bb\u6dfb\u52a0\u6536\u85cf"))))),s&&E.a.createElement("div",{className:"side"},E.a.createElement("div",{className:"row-input"},E.a.createElement(o.a,{className:"icon",type:"compass"}),E.a.createElement(f.a,{className:"input",type:"text",value:a,onChange:function(t){return e.save(t,"longitude")}})),E.a.createElement("div",{className:"row-input"},E.a.createElement(o.a,{className:"icon",type:"compass",rotate:90}),E.a.createElement(f.a,{className:"input",type:"text",value:i,onChange:function(t){return e.save(t,"latitude")}})),E.a.createElement("div",{className:"row-input"},E.a.createElement(o.a,{className:"icon",type:"search"}),E.a.createElement(f.a,{className:"input",type:"text",value:(new Date).toLocaleDateString(),onChange:function(t){return e.save(t,"time")}})),E.a.createElement("div",{className:"row-input"},E.a.createElement(o.a,{className:"icon",type:"environment"}),E.a.createElement(f.a,{className:"input",type:"text",placeholder:"\u8bf7\u8f93\u5165\u5730\u5740",onChange:function(t){return e.save(t,"location")}})),E.a.createElement("div",{className:"row-input"},E.a.createElement(o.a,{className:"icon",type:"menu"}),E.a.createElement(y,{allowclear:"true",autosize:{minRows:3,maxRows:5},placeholder:"\u8bf7\u8f93\u5165\u6807\u9898",onChange:function(t){return e.save(t,"title")}})),E.a.createElement("div",{className:"form-submit"},E.a.createElement(n.a,{block:!0,type:"primary",onClick:this.addFootPrint.bind(this)},"\u6dfb\u52a0"))))}}]),t}(g.Component)}}]);
//# sourceMappingURL=18.dd5ad0be.chunk.js.map